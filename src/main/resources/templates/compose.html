<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Compose Message</title>
    <!-- Include CKEditor -->
    <script src="https://cdn.ckeditor.com/4.16.2/standard/ckeditor.js"></script>
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/compose.css}">
</head>
<body>
    <div class="wrapper">

    <!-- Include the sidebar fragment -->
    <div th:replace="partials/sidebar :: sidebar"></div>

        <div class="main p-3">
            <div class="container1">
                <div class="form-row to">
                    <label for="to">To:</label>
                    <input type="text" id="to" name="to" th:field="*{to}">
                    <button class="field-button" data-dropdown="dropdown-to">Field</button>
                    <ul id="dropdown-to" class="dropdown-content">
                        <!-- Headers will be dynamically added here -->
                    </ul>
                </div>

                <div class="form-row subject">
                    <label for="subject">Subject:</label>
                    <input type="text" id="subject" name="subject" th:field="*{subject}">
                    <button class="field-button" data-dropdown="dropdown-subject">Field</button>
                    <ul id="dropdown-subject" class="dropdown-content">
                        <!-- Headers will be dynamically added here -->
                    </ul>
                </div>

                <div class="form-row">
                    <label for="attachments">Attachments:</label>
                    <input type="file" id="attachments" name="attachments" multiple>
                </div>
                <div class="form-row">
                    <div class="charsetDiv">
                        <label for="charset">Charset:</label>
                        <select id="charset" name="charset" th:field="*{charset}">
                            <option value="Windows-1252">Western European (Windows)</option>
                            <!-- Add more charset options as needed -->
                        </select>
                    </div>
                    <div class="tasks"> 
                        <button>New</button>
                        <button>Open</button>

                        <button id="save-button">Save</button>

                        <!-- Choose Template Button -->
                        <button id="choose-template">Choose Template</button>

                        <!-- Template Selection Modal -->
                        <div id="template-modal" class="modal">
                            <div class="modal-content">
                                <span class="close" id="close-modal">&times;</span>
                                <h2>Select a Template</h2>

                                <!-- Show upload section button -->
                                <button id="show-upload-section">Upload New Template</button>
                                
                                <!-- File upload section (initially hidden) -->
                                <div id="upload-section" style="display: none;">
                                    <div class="form-row">
                                        <label for="upload-template">Upload Template:</label>
                                        <input type="file" id="upload-template" accept=".html">
                                        <button id="upload-template-button">Upload</button>
                                    </div>
                                </div>
                                
                                <!-- Template list -->
                                <ul id="template-list">
                                    <!-- Template options will be added here dynamically -->
                                </ul>
                                
                            </div>
                        </div>

                        <button>E-mail preview</button>

                        <button id="text-from-html">Text from HTML</button>
                        
                        <button>Spam check</button>
                    </div>
                </div>
                
                <div class="editor">
                    <textarea id="message" name="message" th:field="*{message}" placeholder="Compose your message here..."></textarea>
                </div>
                <div class="plain-text-row"> 
                    <div class="plainTextDiv">
                        <input type="checkbox" id="show-plain-text">
                        <label for="plain-text">Plain text</label>
                    </div>
                    <textarea id="plain-text" name="plain-text" th:field="*{plainText}" placeholder="Converted plain text will appear here..."></textarea>
                </div>
            </div>
        </div>
    </div>
    
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script th:src="@{/js/compose.js}"></script>
</body>
</html>
